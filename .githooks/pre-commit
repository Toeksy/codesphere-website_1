#!/bin/sh
set -eu

# TRM pre-commit hook
# Blocks commits if a TRM session is still active (trm/state.json != idle)

if command -v python >/dev/null 2>&1; then
  python tools/trm_check.py
  exit $?
fi

if command -v py >/dev/null 2>&1; then
  py -3 tools/trm_check.py
  exit $?
fi

echo "âŒ TRM pre-commit: Python not found (need python/py on PATH)." >&2
exit 1
